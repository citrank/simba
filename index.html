<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SIMBA â€” Sistem Informasi MSDS Bahan Kimia</title>
<link rel="icon" href="data:;base64,iVBORw0KGgo=">
<style>
/* ====== Basic CSS (responsive + modern card design) ====== */
:root{
Â  --accent:#0073aa;
Â  --muted:#6b7280;
Â  --bg:#f6f9fb;
Â  --card:#fff;
Â  --radius:12px;
Â  --gap:18px;
}
*{box-sizing:border-box}
body{font-family:Inter, "Segoe UI", Roboto, Arial; margin:0; background:var(--bg); color:#0f172a; line-height:1.4}
.container{max-width:1100px; margin:28px auto; padding:0 18px;}
/* Header */
.header{display:flex;align-items:center;gap:12px;padding:12px 0}
.brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:inherit}
.logo{display:flex;align-items:center;gap:8px}
.logo svg{height:36px;width:auto}
.logo img{height:36px;width:auto;display:block}
.brand h1{font-size:20px;margin:0;letter-spacing:1px}
nav{margin-left:auto}
nav a{margin-left:16px;text-decoration:none;color:var(--muted);font-weight:600}
nav a.active{color:var(--accent)}

/* Search big */
.hero{background:linear-gradient(180deg,#fff,#fbfdff); padding:22px;border-radius:var(--radius); box-shadow:0 6px 18px rgba(14,30,37,0.06); margin-bottom:20px}
.hero h2{margin:0 0 8px 0}
.search-wrap{display:flex;gap:10px;align-items:center;margin-top:12px}
.search-box{flex:1;display:flex;align-items:center;background:#fff;border-radius:999px;padding:12px 14px;border:1px solid #e6eef6}
.search-box input{border:0;outline:none;flex:1;font-size:15px}
.select-inline, .btn-primary{padding:10px 14px;border-radius:10px;border:0;font-weight:700}
.btn-primary{background:var(--accent);color:white}

/* Grid cards */
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:18px;margin-top:18px}
.card{background:var(--card);border-radius:14px;padding:14px;box-shadow:0 6px 18px rgba(2,6,23,0.04);border:1px solid rgba(2,6,23,0.03)}
.card h3{margin:0 0 6px 0;font-size:16px;color:#062c4d}
.card .formula{display:inline-block;background:#eaf6ff;color:#0461a8;padding:6px 8px;border-radius:8px;font-weight:700;font-size:13px;margin-bottom:10px}
.card .tags{margin-top:8px}
.badge{display:inline-block;background:#eef2f9;color:#1a3f5c;padding:6px 10px;border-radius:999px;font-size:12px;margin-right:6px}

/* Modal */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(3,12,28,0.5);z-index:9999}
.modal .box{width:95%;max-width:980px;background:white;border-radius:12px;padding:12px;max-height:90vh;overflow:auto}
.modal .box header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.modal iframe{width:100%;height:65vh;border:0;border-radius:8px}

/* small helpers */
.small{font-size:13px;color:var(--muted)}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.controls{display:flex;gap:10px;align-items:center}

/* responsive */
@media (max-width:640px){
Â  .header{
Â  Â  Â  Â  /* Membuat logo dan navigasi bertumpuk, bukan bersebelahan */
Â  Â  Â  Â  flex-direction: column;Â 
Â  Â  Â  Â  align-items: flex-start;
Â  Â  Â  Â  padding: 8px 0 15px 0; /* Tambahkan padding bawah agar ada jarak */
Â  Â  }
Â  Â Â 
Â  Â  /* Mengubah menu navigasi (NAV) */
Â  Â  nav {
Â  Â  Â  Â  margin-left: 0; /* Hapus dorongan ke kanan */
Â  Â  Â  Â  width: 100%; /* Ambil lebar penuh */
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  flex-direction: column; /* Tumpuk tautan secara vertikal */
Â  Â  Â  Â  gap: 0; /* Hapus jarak antar link jika ingin rapat */
Â  Â  }
Â  Â  nav a {
Â  Â  Â  Â  /* Berikan semua tautan lebar penuh dan hilangkan margin horizontal */
Â  Â  Â  Â  margin-left: 0;Â 
Â  Â  Â  Â  padding: 10px 0; /* Perbesar area klik */
Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  border-bottom: 1px solid #eef2f9; /* Garis pemisah agar mudah dibaca */
Â  Â  Â  Â  font-size: 15px; /* Sedikit perbesar font agar mudah dibaca */
Â  Â  }
Â  Â Â 
Â  Â  /* Mengubah kotak pencarian HERO */
Â  Â  .search-wrap {
Â  Â  Â  Â  flex-direction: column; /* Tumpuk elemen search secara vertikal */
Â  Â  Â  Â  gap: 15px;
Â  Â  Â  Â  margin-top: 14px;
Â  Â  }
Â  Â Â 
Â  Â  .search-box, .controls {
Â  Â  Â  Â  width: 100%; /* Pastikan kotak pencarian dan kontrol ambil lebar penuh */
Â  Â  }
Â  Â Â 
Â  Â  /* Memastikan tombol dan dropdown sejajar dan mengisi ruang */
Â  Â  .controls {
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  gap: 10px;
Â  Â  }

Â  Â  /* Memastikan dua kolom kecil (Tips & Piktogram) bertumpuk */
Â  Â  div[style*="flex-wrap:wrap;"] {
Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  gap: 15px !important; /* !important opsional jika perlu menimpa inline style */
Â  Â  }

Â  Â  .hero{padding:14px}
Â  Â  .modal iframe{height:55vh}
}
</style>
</head>
<body>
<div class="container">
Â  Â  <header class="header">
Â  Â  <a class="brand" href="#home" id="nav-home">
Â  <div class="logo" aria-hidden>
Â  Â  Â  Â  <img src="assets/gambar/LogoSImba.png" alt="Logo SIMBA" id="png-logo">
Â  </div>
Â  Â  Â  <h1>SIMBA</h1>
</a>

Â  Â  <nav>
Â  <a href="#home" class="navlink active" data-target="home">Beranda</a>
Â  <a href="#msds" class="navlink" data-target="msds">MSDS</a>
Â  <a href="#pengujian" class="navlink" data-target="pengujian">Pengujian</a>
Â  <a href="#ghs" class="navlink" data-target="ghs">Piktogram GHS</a>
Â  <a href="#apd" class="navlink" data-target="apd">APD</a>
</nav>

Â  </header>

Â  Â  <section id="home" class="hero">
Â  Â  <h2>Selamat datang di SIMBA</h2>
Â  Â  <p class="small">Sistem Informasi MSDS Bahan Kimia â€” cari informasi MSDS, piktogram, dan APD dengan cepat & aman.</p>

Â  Â  <div class="search-wrap" style="margin-top:14px">
Â  Â  Â  <div class="search-box">
Â  Â  Â  Â  <input id="searchInput" type="search" placeholder="Cari nama bahan kimia / rumus / pengujian..." aria-label="search"/>
Â  Â  Â  </div>
Â  Â  Â  <div class="controls">
Â  Â  Â  Â  <select id="sortSelect" class="select-inline">
Â  Â  Â  Â  Â  <option value="name">Urut: Nama (Aâ€“Z)</option>
Â  Â  Â  Â  Â  <option value="test">Urut: Pengujian</option>
Â  Â  Â  Â  </select>
Â  Â  Â  Â  <button id="goMsds" class="btn-primary">Cari</button>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  Â  Â  <div style="margin-top:18px;">
Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex;gap:18px;margin-bottom:18px;flex-wrap:wrap;">
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="flex:1;min-width:240px;background:#fff;padding:12px;border-radius:12px;border:1px solid rgba(0,0,0,0.04)">
Â  Â  Â  Â  Â  Â  Â  Â  <h4>Piktogram GHS of the Day</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="piktogramOfDay" class="small">Memuat...</div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="flex:1;min-width:240px;background:#fff;padding:12px;border-radius:12px;border:1px solid rgba(0,0,0,0.04)">
Â  Â  Â  Â  Â  Â  Â  Â  <h4>Tips K3 of the Day</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="tipsOfDay" class="small">Memuat...</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div style="background:#fff;padding:12px;border-radius:12px;border:1px solid rgba(0,0,0,0.04)">
Â  Â  Â  Â  Â  Â  <h4>Top 5 Bahan Kimia Sering Digunakan</h4>
Â  Â  Â  Â  Â  Â  <ul id="topUsedList" style="list-style:none; padding:0; margin:0;">
Â  Â  Â  Â  Â  Â  Â  Â Â Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â  Â  </section>

Â  Â  <section id="msds" style="display:none; margin-top:18px">
Â  Â  <h2>Database MSDS</h2>
Â  Â  <p class="small">Klik kartu untuk melihat MSDS lengkap (buka & download PDF).</p>

Â  Â  Â  Â  <div class="row" style="margin-top:12px;">
Â  Â  Â  <label class="small">Filter Pengujian:</label>
Â  Â  Â  <select id="filterTest" class="select-inline">
Â  Â  Â  Â  <option value="">Semua</option>
Â  Â  Â  </select>
Â  Â  Â  <label class="small">Urut:</label>
Â  Â  Â  <select id="sortSelect2" class="select-inline">
Â  Â  Â  Â  <option value="name">Nama (Aâ€“Z)</option>
Â  Â  Â  Â  <option value="test">Pengujian</option>
Â  Â  Â  </select>
Â  Â  </div>

Â  Â  <div id="msdsGrid" class="grid" style="margin-top:14px"></div>
Â  </section>

Â  Â  <section id="pengujian" style="display:none;margin-top:18px">
Â  Â  <h2>Pengujian</h2>
Â  Â  <p class="small">Pilih kategori pengujian untuk melihat bahan yang digunakan.</p>
Â  Â  <div id="testsList" class="grid" style="margin-top:12px"></div>
Â  </section>

Â  Â  <section id="ghs" style="display:none;margin-top:18px">
Â  Â  <h2>Piktogram GHS</h2>
Â  Â  <p class="small">Kenali simbol-simbol bahaya universal ini! GHS (Globally Harmonized System) diciptakan agar kita semua, di mana pun, bisa langsung 'ngeh' sama bahaya suatu bahan kimia. Anggap aja ini emoji, tapi versi keselamatan.</p>
Â  Â  <div id="ghsList" style="margin-top:12px" class="grid"></div>
Â  </section>

Â  Â  <section id="apd" style="display:none;margin-top:18px">
Â  Â  <h2>APD Wajib di Laboratorium</h2>
Â  Â  <p class="small">Di lab, keselamatan itu nomor satu! Alat Pelindung Diri (APD) atau Personal Protective Equipment (PPE) adalah 'armor' yang melindungimu dari bahaya tak terlihat. Jangan anggap remeh, yuk kenali para pahlawan pelindung ini!</p>
Â  Â  <div id="apdList" style="margin-top:12px" class="grid"></div>
Â  </section>
</div>

<div id="modal" class="modal">
Â  <div class="box">
Â  Â  <header>
Â  Â  Â  <strong id="modalTitle">Nama Bahan</strong>
Â  Â  Â  <div><button id="closeModal" class="btn-primary" style="background:#e05454">Tutup</button></div>
Â  Â  </header>
Â  Â  <div id="modalMeta" class="small"></div>
Â  Â  <div id="modalContent" style="margin-top:10px">
Â  Â  Â  <iframe id="pdfViewer" src="" aria-label="MSDS viewer"></iframe>
Â  Â  Â  <div style="margin-top:8px">
Â  Â  Â  Â  <a id="downloadLink" class="btn-primary" href="#" target="_blank">Download PDF</a>
Â  Â  Â  </div>
Â  Â  </div>
Â  </div>
</div>

<script>
/* ====== Data: jika ingin, kamu dapat memindah ini ke file data/msds.json dan fetch() ====== */
/* Contoh data minimal, ganti / tambahkan sesuai file Excel kamu. "pdf" is relative path under assets/pdf/ */
const MSDS_DATA = [
Â  {
Â  Â  "id":"naoh",
Â  Â  "name":"Natrium Hidroksida (Sodium Hydroxide)",
Â  Â  "formula":"NaOH",
Â  Â  "testing":["Amonia","Cemaran Logam (Hg)"],
Â  Â  "pdf":"assets/pdf/NaOH.PDF",
Â  Â  "piktogram":"ðŸ§´ Korosif",
Â  Â  "apd":["Sarung tangan nitril","Jas lab","Masker"]
Â  },
Â  {
Â  Â  "id":"h2so4",
Â  Â  "name":"Asam Sulfat (Sulfuric Acid)",
Â  Â  "formula":"H2SO4",
Â  Â  "testing":["COD","Nitrit (NO2-N)"],
Â  Â  "pdf":"assets/pdf/H2SO4.PDF",
Â  Â  "piktogram":"Korosif",
Â  Â  "apd":["Goggles","Jas Lab","Sarung tangan tahan asam","Respirator"]
Â  },
Â  {
Â  Â  "id":"hgso4",
Â  Â  "name":"Merkuri(II) sulfat (Mercuric sulfate)",
Â  Â  "formula":"HgSO4",
Â  Â  "testing":["COD"],
Â  Â  "pdf":"assets/pdf/Hg2SO4.PDF",
Â  Â  "piktogram":["Toxic","Bahaya Kesehatan","Korosif","Pencemar Lingkungan"],
Â  Â  "apd":["Goggles","Sarung tangan nitril","Masker","Jas Lab"]
Â  },
Â  Â {
Â  Â  "id":"phenol",
Â  Â  "name":"Larutan Fenol (Phenol)",
Â  Â  "formula":"C6H5OH",
Â  Â  "testing":["Amonia"],
Â  Â  "pdf":"assets/pdf/PHENOL.PDF",
Â  Â  "piktogram":["Toxic","Bahaya Kesehatan","Korosif","Pencemar Lingkungan"],
Â  Â  "apd":["Goggles","Sarung tangan nitril","Masker","Jas Lab"]
Â  },
Â  {
Â  Â  "id":"nitropusid",
Â  Â  "name":"Natrium Nitropusid (Sodium Nitroprusside)",
Â  Â  "formula":"Naâ‚‚[Fe(CN)â‚…NO]Â·2Hâ‚‚O",
Â  Â  "testing":["Amonia"],
Â  Â  "pdf":"assets/pdf/NatriumNitroprusid.PDF",
Â  Â  "piktogram":"Toxic",
Â  Â  "apd":["Goggles","Sarung tangan nitril","Masker","Jas Lab"]
Â  },
Â  {
Â  Â  "id":"trinatrium",
Â  Â  "name":"Trinatrium Sitrat",
Â  Â  "formula":"Naâ‚ƒCâ‚†Hâ‚…Oâ‚‡",
Â  Â  "testing":["Amonia"],
Â  Â  "pdf":"assets/pdf/Trinatirumsitrat.PDF",
Â  Â  "piktogram":"-",
Â  Â  "apd":["Sarung tangan nitril","Masker","Jas Lab"]
Â  },
Â  {
Â  Â  "id":"hipoklorit",
Â  Â  "name":"Natrium Hipoklorit (Sodium hypochlorite)",
Â  Â  "formula":"NaClO",
Â  Â  "testing":["Amonia"],
Â  Â  "pdf":"assets/pdf/NatriumHipoklorit.PDF",
Â  Â  "piktogram":["Toxic","Pencemar Lingkungan"],
Â  Â  "apd":["Sarung tangan nitril","Masker","Jas Lab"]
Â  },
Â  {
Â  Â  "id":"amonia",
Â  Â  "name":"Larutan Standard Amonium (Ammonium chloride)",
Â  Â  "formula":"NH4Cl in H2O",
Â  Â  "testing":["Amonia"],
Â  Â  "pdf":"assets/pdf/stdamonia.PDF",
Â  Â  "piktogram":"-",
Â  Â  "apd":["Sarung tangan nitril","Masker","Jas Lab"]
Â  }
];

/* Piktogram list & 'bahasa gaul' descriptions untuk of the day */
const PIKTOGRAMS = [
Â  {id:"explosive", name:"Eksplosif", slang:"Bahan kimia ini bisa meledak! Biasanya karena nggak stabil, bisa bereaksi sendiri. Jauhin dari panas, guncangan, atau gesekan. Pokoknya, jangan diajak bercanda.", imagePath:"assets/ghs/Eksplosif.png"},
Â  {id:"corrosive", name:"Korosif", slang:"Bahan ini 'ganas'! Bisa merusak logam, dan yang lebih ngeri, bisa bikin kulit atau mata kamu iritasi parah. Kalau kena, rasanya kayak kebakar. Jangan sampai kontak langsung!", imagePath:"assets/ghs/Korosif.png"},
Â  {id:"toxic", name:"Racun", slang:"Jangan main-main, levelnya 'danger'. Sedikit aja tertelan, terhirup, atau kena kulit bisa berakibat fatal atau keracunan parah.", imagePath:"assets/ghs/Toxic.png"},
Â  {id:"oksidator", name:"Oksidator", slang:"Bahan ini bisa bikin bahan lain terbakar lebih hebat, atau bahkan meledak. Jangan pernah campur dengan bahan yang mudah terbakar, bisa-bisa jadi ada pesta kembang api dadakan.", imagePath:"assets/ghs/Oksidator.png"},
Â  {id:"environment", name:"Pencemar Lingkungan", slang:"Bahan ini musuhnya alam, terutama kehidupan air. Jangan sampai tumpah atau dibuang sembarangan ke selokan. Kita jaga bumi bareng-bareng, ya!", imagePath:"assets/ghs/Lingkungan.png"},
Â  {id:"flammable", name:"Mudah Menyala", slang:"Hati-hati, bahan ini gampang banget kebakar. Mulai dari yang bisa nyala sendiri di udara, sampai yang butuh percikan api dikit aja sudah nyala. Pastiin jauh dari sumber api ya!", imagePath:"assets/ghs/Menyala.png"},
Â  {id:"compressed gas", name:"Gas Bertekanan", slang:"Isinya gas yang dimampatkan, bisa gas cair atau terlarut. Kalau wadahnya rusak atau kepanasan, isinya bisa 'kabur' dan bikin cedera, atau bahkan meledak. Simpan di tempat yang dingin ya!.", imagePath:"assets/ghs/GasBertekanan.png"},
Â  {id:"health hazzard", name:"Bahaya Kesehatan", slang:"Efeknya nggak langsung kelihatan, tapi bahaya jangka panjang. Bisa jadi karsinogen (penyebab kanker), mutagen (merusak gen), atau beracun buat organ tubuh. Jaga diri baik-baik!", imagePath:"assets/ghs/Karsinogen.png"},
Â  {id:"harmful", name:"Pemicu Iritasi", slang:"Level waspada! Bahan ini bisa bikin iritasi kulit atau mata, ruam, atau pusing kalau terhirup. Nggak se-fatal yang lain, tapi tetap aja nggak nyaman dan harus dihindari.", imagePath:"assets/ghs/iritasi.png"},
Â Â 
];

/* Tips K3 (bahasa santai/gaul) */
const TIPS = [
Â  "Jangan pipet pake mulut, selalu pakai pipet bulb.",
Â  "Selalu baca label MSDS sebelum pakai bahan kimia baru. Kenali musuhmu sebelum berperang!",
Â  "Label bahan itu penting, jangan nebak-nebak.",
Â  "Kalau tumpah, lap dulu pake pad yang sesuai dan laporkan.",
Â  "Rambut panjang? Ikat ke belakang! Biar nggak jadi 'sumbu' dadakan pas deket api.",
Â  "Pakai sepatu tertutup, ya! Sandal jepit emang nyaman, tapi nggak bakal melindungimu dari pecahan kaca atau tumpahan asam.",
Â  "Cuci tangan pakai sabun setelah selesai kerja di lab, bahkan kalau kamu pakai sarung tangan. Kebersihan pangkal kesehatan!",
Â  "Jangan pernah mencampur bahan kimia sembarangan. Reaksi tak terduga bisa jadi bencana. 'Kepo' di lab bisa bahaya!",
Â  "Jangan pernah makan atau minum di dalam lab. Sisa bahan kimia bisa aja nempel di makananmu, lho!",
Â  "Safety Googles itu bukan untuk gaya-gayaan. Pakai saat menangani bahan kimia dengan potensi cipratan, partikel berterbangan dan yang menghasilkan uap.",
];

/* Data APD */
const APD_DATA = [
Â  {title:"Kacamata Safety", desc:"Ini 'kacamata super' buat di lab. Melindungi mata dari percikan bahan kimia, debu, atau benda tajam. Wajib dipakai, karena mata kamu cuma ada sepasang!", imagePath:"assets/apd/goggles.png"},
Â  Â  {title:"Sarung Tangan Nitril", desc:"Bahan kimia tertentu tidak boleh sentuh langsung. Selalu gunakan sarung tangan ya saat melakukan pengujian", imagePath:"assets/apd/gloves.png"},
Â  Â  {title:"Jas Laboratorium", desc:"Jas lab ini bukan buat gaya-gayaan, tapi sebagai 'tameng' pertama buat badan dan pakaianmu dari tumpahan atau percikan bahan kimia. Anggap aja ini jubah superhero-mu di lab.", imagePath:"assets/apd/jaslab.png"},
Â  Â  {title:"Respirator", desc:"Kalau kamu kerja dengan gas, uap, debu atau bahan kimia berbahaya, ini penyelamatmu. Respirator menyaring udara yang kamu hirup, jadi paru-parumu tetap aman dan sehat.", imagePath:"assets/apd/resp.png"},
Â  Â  {title:"Sepatu Safety", desc:"sepatu tertutup wajib dipakai untuk melindungi kaki dari kecelakaan dan tumpahan bahan kimia berbahaya, seperti tumpahan cairan, benda jatuh, atau pecahan kaca.", imagePath:"assets/apd/sepatu.png"},
Â  ];

// START: DATA BARU UNTUK FITUR TOP 5
const TOP_USED_IDS = [
Â  Â  "h2so4",Â  // Asam Sulfat
Â  Â  "naoh",Â  Â // Natrium Hidroksida
Â  Â  "hgso4",Â  // Merkuri(II) sulfat
Â  Â  "phenol", // Larutan Fenol
Â  Â  "hipoklorit" // Natrium Hipoklorit
];
// END: DATA BARU UNTUK FITUR TOP 5

/* ====== App code (rendering + events) ====== */
const msdsGrid = document.getElementById('msdsGrid');
const testsList = document.getElementById('testsList');
const ghsList = document.getElementById('ghsList');
const apdList = document.getElementById('apdList');
const filterTest = document.getElementById('filterTest');
const searchInput = document.getElementById('searchInput');
const sortSelect = document.getElementById('sortSelect');
const sortSelect2 = document.getElementById('sortSelect2');
const modal = document.getElementById('modal');
const modalTitle = document.getElementById('modalTitle');
const pdfViewer = document.getElementById('pdfViewer');
const downloadLink = document.getElementById('downloadLink');
const goMsds = document.getElementById('goMsds');
const piktogramOfDay = document.getElementById('piktogramOfDay');
const tipsOfDay = document.getElementById('tipsOfDay');

let DATA = MSDS_DATA.slice(); // if you fetch external JSON, assign it here

/* utility: unique testing values */
function getAllTests(data){
Â  const s = new Set();
Â  data.forEach(d=>d.testing.forEach(t=>s.add(t)));
Â  return Array.from(s).sort();
}

/* render cards */
function renderGrid(data){
Â  msdsGrid.innerHTML = '';
Â  if(!data.length){
Â  Â  msdsGrid.innerHTML = '<div class="small">Tidak ada bahan.</div>';
Â  Â  return;
Â  }
Â  data.forEach(item=>{
Â  Â  const div = document.createElement('div');
Â  Â  div.className = 'card msds-card';
Â  Â  div.setAttribute('data-id', item.id);
Â  Â  div.innerHTML = `
Â  Â  Â  <h3>${item.name}</h3>
Â  Â  Â  <div class="small subtitle">(${item.formula || '-'})</div>
Â  Â  Â  <div class="formula">${item.formula||''}</div>
Â  Â  Â  <div class="tags">${item.testing.map(t=>`<span class="badge">${t}</span>`).join(' ')}</div>
Â  Â  Â  <div style="margin-top:10px"><button class="btn-primary" data-id="${item.id}">Lihat MSDS</button></div>
Â  Â  `;
Â  Â  msdsGrid.appendChild(div);
Â  });
}
/* render tests list as clickable cards */
function renderTests(tests){
Â  testsList.innerHTML='';
Â  tests.forEach(t=>{
Â  Â  const c=document.createElement('div'); c.className='card';
Â  Â  c.innerHTML=`<h3>${t}</h3><div class="small">Klik untuk melihat bahan terkait</div>`;
Â  Â  c.addEventListener('click', ()=> {
Â  Â  Â  showSection('msds');
Â  Â  Â  filterTest.value = t;
Â  Â  Â  applyFilters();
Â  Â  });
Â  Â  testsList.appendChild(c);
Â  });
}
/* render GHS list (static with descriptions) */
function renderGHS(){
Â  ghsList.innerHTML='';
Â  PIKTOGRAMS.forEach(p=>{
Â  Â  const c=document.createElement('div'); c.className='card';
Â  Â Â 
Â  Â  // Ganti BARIS INI (c.innerHTML)
Â  Â  c.innerHTML=`
Â  Â  Â  <div style="text-align:center; margin-bottom: 10px;">
Â  Â  Â  Â  Â  <imgÂ 
Â  Â  Â  Â  Â  Â  Â  src="${p.imagePath}"Â 
Â  Â  Â  Â  Â  Â  Â  alt="Piktogram ${p.name}"Â 
Â  Â  Â  Â  Â  Â  Â  style="height: 60px; width: 60px; object-fit: contain; margin-bottom: 8px;"
Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  <h3 style="font-size: 18px; margin: 0;">${p.name}</h3>
Â  Â  Â  </div>
Â  Â  Â  <div class="small">${p.slang}</div>
Â  Â  `;
Â  Â Â 
Â  Â  ghsList.appendChild(c);
Â  });
}
/* render APD list (example) */
function renderAPD(){
Â apdList.innerHTML='';
Â  APD_DATA.forEach(a=>{
Â  Â  const c=document.createElement('div'); c.className='card';
Â  Â  c.innerHTML=`
Â  Â  Â  <div style="text-align:center; margin-bottom: 10px;">
Â  Â  Â  Â  Â  <imgÂ 
Â  Â  Â  Â  Â  Â  Â  src="${a.imagePath}"Â 
Â  Â  Â  Â  Â  Â  Â  alt="Gambar ${a.title}"Â 
Â  Â  Â  Â  Â  Â  Â  style="height: 70px; width: 70px; object-fit: contain; margin-bottom: 8px;"
Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  <h3 style="font-size: 16px; margin: 0 0 5px 0;">${a.title}</h3>
Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="small">${a.desc}</div>
Â  Â  `;
Â  Â  apdList.appendChild(c);
Â  });
}

// FUNGSI BARU UNTUK MERENDER TOP 5 DI BERANDA
function renderTopUsed(){
Â  Â  const topContainer = document.getElementById('topUsedList');
Â  Â  if (!topContainer) return;

Â  Â  // Ambil data lengkap dari MSDS_DATA menggunakan ID
Â  Â  const topItems = TOP_USED_IDS
Â  Â  Â  Â  .map(id => DATA.find(d => d.id === id))
Â  Â  Â  Â  .filter(item => item !== undefined); 

Â  Â  topContainer.innerHTML = '';
Â  Â Â 
Â  Â  // Render item sebagai list
Â  Â  topItems.forEach((item, index) => {
Â  Â  Â  Â  const li = document.createElement('li');
Â  Â  Â  Â  // Styling untuk tampilan yang rapi (pemisah dan tata letak)
Â  Â  Â  Â  li.style.cssText = 'padding: 8px 0; border-bottom: 1px solid #eee; display:flex; justify-content:space-between; align-items:center;';
Â  Â  Â  Â Â 
Â  Â  Â  Â  li.innerHTML = `
Â  Â  Â  Â  Â  Â  <div style="font-weight: 600;">#${index + 1}. ${item.name} <span class="small">(${item.formula||'-'})</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn-primary small" data-id="${item.id}" style="padding: 6px 10px; font-size: 12px; cursor: pointer;">Lihat MSDS</button>
Â  Â  Â  Â  `;
Â  Â  Â  Â  topContainer.appendChild(li);
Â  Â  });
}

/* fill filter dropdown */
function fillTestFilter(){
Â  const all = getAllTests(DATA);
Â  filterTest.innerHTML = '<option value="">Semua</option>';
Â  all.forEach(t=>{
Â  Â  const opt = document.createElement('option'); opt.value=t; opt.textContent=t;
Â  Â  filterTest.appendChild(opt);
Â  });
}

/* search + filter + sort pipeline */
function applyFilters(){
Â  let list = DATA.slice();
Â  const q = searchInput.value.trim().toLowerCase();
Â  if(q){
Â  Â  list = list.filter(item=>{
Â  Â  Â  return (item.name && item.name.toLowerCase().includes(q)) ||
Â  Â  Â  Â  Â  Â  Â (item.formula && item.formula.toLowerCase().includes(q)) ||
Â  Â  Â  Â  Â  Â  Â (item.testing && item.testing.join(' ').toLowerCase().includes(q));
Â  Â  });
Â  }
Â  const f = filterTest.value;
Â  if(f){
Â  Â  list = list.filter(item=> item.testing.includes(f) );
Â  }
Â  const sortVal = (sortSelect2 && sortSelect2.value) || (sortSelect && sortSelect.value) || 'name';
Â  if(sortVal === 'name'){
Â  Â  list.sort((a,b)=> a.name.localeCompare(b.name));
Â  } else {
Â  Â  list.sort((a,b)=> (a.testing[0]||'').localeCompare(b.testing[0]||''));
Â  }
Â  renderGrid(list);
}

/* handle clicks on MSDS buttons (open modal) */
document.addEventListener('click', function(e){
Â  const btn = e.target.closest('button[data-id]');
Â  if(btn){
Â  Â  const id = btn.getAttribute('data-id');
Â  Â  const item = DATA.find(d=>d.id===id);
Â  Â  if(item){
Â  Â  Â  openModal(item);
Â  Â  }
Â  }
});

/* modal open */
function openModal(item){
Â  modalTitle.textContent = item.name;
Â  const meta = `<div><strong>Rumus:</strong> ${item.formula||'-'}</div>
Â  <div><strong>Pengujian:</strong> ${item.testing.join(', ')}</div>
Â  <div><strong>Piktogram:</strong> ${ Array.isArray(item.piktogram) ? item.piktogram.join(', ') : item.piktogram || '-' }</div>
Â  <div><strong>APD:</strong> ${ (item.apd||[]).join(', ') }</div>`;
Â  document.getElementById('modalMeta').innerHTML = meta;
Â  pdfViewer.src = item.pdf; // must be path to pdf in repo
Â  downloadLink.href = item.pdf;
Â  modal.style.display = 'flex';
}

/* close modal */
document.getElementById('closeModal').addEventListener('click', ()=> modal.style.display='none');
modal.addEventListener('click', (ev)=>{ if(ev.target === modal) modal.style.display='none' });

/* Nav / routing (simple) */
function showSection(id){
Â  ['home','msds','pengujian','ghs','apd'].forEach(s=>{
Â  Â  const el = document.getElementById(s);
Â  Â  if(el) el.style.display = (s===id)?'block':'none';
Â  });
Â  // highlight menu
Â  document.querySelectorAll('nav a.navlink').forEach(a=>{
Â  Â  a.classList.toggle('active', a.getAttribute('data-target')===id);
Â  });
Â  // scroll to top a bit
Â  window.scrollTo({top:0, behavior:'smooth'});
}

Â  /* START OF NAVIGATION FIX: Tambahkan Event Listener untuk tautan menu */
document.querySelectorAll('nav a.navlink').forEach(link => {
Â  Â  link.addEventListener('click', function(e) {
Â  Â  Â  Â  // Mencegah browser melompat ke #ID di URL secara default
Â  Â  Â  Â  e.preventDefault();Â 
Â  Â  Â  Â  const targetId = this.getAttribute('data-target');
Â  Â  Â  Â  if (targetId) {
Â  Â  Â  Â  Â  Â  // Panggil fungsi showSection yang sudah ada
Â  Â  Â  Â  Â  Â  showSection(targetId);
Â  Â  Â  Â  }
Â  Â  });
});
/* END OF NAVIGATION FIX */
Â Â 
/* search button on home goes to msds with query */
goMsds.addEventListener('click', ()=>{
Â  showSection('msds');
Â  applyFilters();
});

/* wire controls */
searchInput.addEventListener('input', applyFilters);
sortSelect2.addEventListener('change', applyFilters);
filterTest.addEventListener('change', applyFilters);

/* Piktogram / Tips of the day (daily rotating by date) */
function dailyIndex(length){
Â  const d = new Date();
Â  const days = Math.floor(d/ (1000*60*60*24) );
Â  return days % length;
}
function renderPiktogramAndTips(){
Â  const pi = dailyIndex(PIKTOGRAMS.length);
Â  const ti = dailyIndex(TIPS.length);
Â  const p = PIKTOGRAMS[pi];
Â  piktogramOfDay.innerHTML = `
Â  Â  Â  <div style="text-align:center; padding: 10px 0;">
Â  Â  Â  Â  Â  <imgÂ 
Â  Â  Â  Â  Â  Â  Â  src="${p.imagePath}"Â 
Â  Â  Â  Â  Â  Â  Â  alt="Piktogram ${p.name}"Â 
Â  Â  Â  Â  Â  Â  Â  style="height: 40px; width: 40px; object-fit: contain; margin-bottom: 5px;"
Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  <strong style="font-size: 15px; display: block;">${p.name}</strong>
Â  Â  Â  </div>
Â  Â  Â  <div class="small" style="margin-top:5px;">${p.slang}</div>
Â  `;
Â Â 
Â  tipsOfDay.textContent = TIPS[ti];
}

/* init app */
function init(){
Â  // if you want remote JSON, replace with fetch('data/msds.json').then(r=>r.json()).then(d=>{DATA=d; ...})
Â  renderGrid(DATA);
Â  const tests=getAllTests(DATA);
Â  renderTests(tests);
Â  renderGHS();
Â  renderAPD();
Â  fillTestFilter();
Â  renderPiktogramAndTips();
Â  // Panggil fungsi baru di sini
Â  renderTopUsed(); 
Â  showSection('home');
}
init();

/* optional: if you host JSON externally (e.g. data/msds.json), uncomment and use below:
fetch('data/msds.json').then(r=>r.json()).then(j=>{
Â  DATA=j;
Â  init();
});
*/

</script>
</body>
</html>
